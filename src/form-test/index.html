<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>form test</title>
    <script src="client.js" charset="utf-8"></script>
  </head>
  <body>
    <div id="feed">
    </div>
    <script type="text/javascript">
      (async function(){

        const el = document.querySelector('#feed')

        const responses = await TimeStreams.getBulk('/posts')

        for (const p of responses) {
          const type = p.headers.get('content-type')
          const date = p.headers.get('post-time')
          const links = TimeStreams.parseLinkHeader(p.headers.get('link'))
          console.log("links:", links)
          if (type.includes('text')) {
            const text = await p.text()
            el.innerHTML += `<div>${text} - ${date}</div>`
          } else if (type.includes('image')) {
            const url = URL.createObjectURL(await p.blob())
            el.innerHTML += `<div><img style="max-width:200px" src="${url}">  - ${date}</div>`
          }
        }
      })()
    </script>
  </body>
</html>
